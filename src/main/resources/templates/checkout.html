<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml" lang="en">
<head th:replace="common/header :: common-header"/>

<body>
<div th:replace="common/header :: navbar"/>
<div class="container">
    <div class="row" style="margin-bottom: -100px;">
        <div class="col-xs-8">
            <h2 class="section-headline"><span>Konto Użytkowanika</span></h2>
        </div>
        <div class="col-xs-4">
            <img src="/image/logo.png" class="img-responsive"/>
        </div>

    </div>

    <hr style="position: absolute; width: 100%; height: 6px; background-color: #333; z-index: -1; margin-top: -50px;"/>
    <img class="img-responsive" src="/image/wood.png"
         style="margin-top: -75px;"/>


    <div class="row" style="margin-top: 10px">
        <form th:action="@{/checkout}" method="post">

            <!--Lewy Panel-->
            <div class="col-xs-4">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <button type="submit" class="btn btn-warning btn-block">Złoż zamówienie</button>

                        <p style="font-size: smaller;">Składając zamówienie, wyrażasz zgodę na <a href="#">warunki
                            ksiegrani Salega</a> i <a>zasady
                            zachowania poufności informacji</a></p>
                        <hr/>

                        <h3>Podsumowanie Zamowienia</h3>
                        <div class="row">
                            <div class="col-xs-7 text-left">
                                Kwota przed opodatkowaniem:
                            </div>
                            <div class="col-xs-5 text-right">
                                <span th:text="${shoppingCart.grandTotal}"></span>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-xs-7 text-left">
                                <h3 style="color: darkred;"><strong>Suma zamówienia</strong></h3>
                            </div>
                            <div class="col-xs-5 text-right">
                                <h3><strong style="color: darkred;"><span
                                        th:with="total=${shoppingCart.grandTotal+ shoppingCart.grandTotal*0.06}"
                                        th:text="${#numbers.formatDecimal(total, 0, 2)}"></span>
                                    PLN</strong></h3>
                            </div>
                        </div>
                        <div class="panel-footer">Wysyłka i obsługa nie zostały doliczone.</div>

                    </div>
                </div>
            </div>
            <!--Informacje o zamówieniu-->
            <div class="col-xs-8">
                <div th:if="${missingRequiredField}">
                    <h5 class="alert alert-warning">Brakuje niektórych pól. Pole z * jest wymagane.</h5>
                </div>
                <div class="panel-group" id="accordion">
                    <!--Adres wysyłki-->
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" data-parent="#accordion" href="#shippingInfo">
                                    1. Adres Wysyłki
                                </a>
                            </h4>
                        </div>
                        <div id="shippingInfo" class="panel-collapse collapse"
                             th:classappend="${classActiveShipping}? 'in'">

                            <div class="panel-body">
                                <table class="table" th:if="${not emptyShippingList}">
                                    <thead>
                                    <tr>
                                        <th>Dostępny adres wysyłki</th>
                                        <th>Operations</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr th:each="userShipping : ${userShippingList}">
                                        <td th:text="${userShipping.userShippingStreet1}+' '
                                        +${userShipping.userShippingStreet2}+', '
                                        + ${userShipping.userShippingCity}+', '+
                                        ${userShipping.userShippingState}"></td>
                                        <td>
                                            <a th:href="@{/setShippingAddress(userShippingId=${userShipping.id})}">
                                                Użyj tego adresu
                                            </a>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>

                                <div class="form-group">
                                    <label for="shippingName">* Imie</label>
                                    <input type="text" class="form-control" id="shippingName"
                                           placeholder="Nazwa odbiorcy" name="shippingAddressName"
                                           th:value="${shippingAddress.shippingAddressName}"/>
                                </div>

                                <div class="form-group">
                                    <label for="shippingStreet">* Adres</label>
                                    <input type="text" class="form-control" id="shippingStreet"
                                           placeholder="Adres 1" name="shippingAddressStreet1"
                                           th:value="${shippingAddress.shippingAddressStreet1}"/>
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control"
                                           placeholder="Adres 2" name="shippingAddressStreet2"
                                           th:value="${shippingAddress.shippingAddressStreet2}"/>
                                </div>

                                <div class="row">
                                    <div class="col-xs-4">
                                        <div class="form-group">
                                            <label for="shippingCity">* Miasto</label>
                                            <input type="text" class="form-control" id="shippingCity"
                                                   placeholder="Miasto"
                                                   th:name="shippingAddressCity" required="required"
                                                   th:value="${shippingAddress.shippingAddressCity}"/>
                                        </div>
                                    </div>


                                    <div class="col-xs-4">
                                        <div class="form-group">
                                            <label for="shippingVoivodeships">* Województwo</label>
                                            <select id="shippingVoivodeships" class="form-control"
                                                    th:name="shippingAddressVoivodeships"
                                                    th:value="${shippingAddress.shippingAddressVoivodeships}"
                                                    required="required">
                                                <option value="" disabled="disabled">Proszę wybrać opcję
                                                </option>
                                                <option th:each="voivodeships : ${voivodeshipsList}"
                                                        th:text="${voivodeships}"
                                                        th:selected="(${shippingAddress.shippingAddressVoivodeships}==${voivodeships})">
                                                    Proszę wybrać opcję
                                                </option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="col-xs-4">
                                        <div class="form-group">
                                            <label for="shippingPostcode">* Kod pocztowy</label>
                                            <input type="text" class="form-control" id="shippingPostcode"
                                                   placeholder="Kod pocztowy"
                                                   th:name="shippingAddressPostcode" required="required"
                                                   th:value="${shippingAddress.shippingAddressPostcode}"
                                            />
                                        </div>
                                        <a data-toggle="collapse" data-parent="#accordion"
                                           class="btn btn-warning pull-right" href="#paymentInfo">Następny</a>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </form>
    </div>

</div>


<!--koniec kontenera-->


<div th:replace="common/header :: body-bottom-scripts"/>

</body>
</html>
